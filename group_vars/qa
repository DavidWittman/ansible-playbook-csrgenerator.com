# Self-signed certificate for testing
csrgen_https: yes
csrgen_cert: |
  -----BEGIN CERTIFICATE-----
  MIIDVTCCAj2gAwIBAgIJAK+msYxxN16iMA0GCSqGSIb3DQEBCwUAMEExFDASBgNV
  BAMMC2V4YW1wbGUuY29tMRwwGgYDVQQKDBNXaXR0bWFuIEVudGVycHJpc2VzMQsw
  CQYDVQQGEwJVUzAeFw0xNjAzMTMxNzE4MTJaFw0xNzAzMTMxNzE4MTJaMEExFDAS
  BgNVBAMMC2V4YW1wbGUuY29tMRwwGgYDVQQKDBNXaXR0bWFuIEVudGVycHJpc2Vz
  MQswCQYDVQQGEwJVUzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMNH
  GaVH5LFXsMS/Cf4UVkntqArZ0eHyuZ8gNFgWQC9WJuWqf2E8exXgMEZ10s9mvIqH
  51uGkQqcJD083GF7+ERFgGKDuOyNvLFqhCwGRt3bSa+xeqj4eoN914v5hBZVhwnl
  ifhJABtxURDw4Ry5ttT3Ib9TBWIHu8CHI4V+z40b8tgBAusPwHtR9bXbrH7pt1GJ
  CIcXvfTtrsFscKNkJAM1IvXZxY4sy5ZHBuS9IXewkLoscERQ4qebcsG+VAVibMfa
  KVP4x2feKifJTbYdMgoV7h57a+Z0r3Q9SP15aRpHv3xVh1cQZhyfAQoO9SkZfJVc
  aKoTXnB2C4iDpLrjSFMCAwEAAaNQME4wHQYDVR0OBBYEFFTvzgABAJwtphxHf1oc
  njanwARdMB8GA1UdIwQYMBaAFFTvzgABAJwtphxHf1ocnjanwARdMAwGA1UdEwQF
  MAMBAf8wDQYJKoZIhvcNAQELBQADggEBAB+2Fz2jGryiijANkcHJqd5iTAqn2k4u
  stlKb0737NIX7gFXyLJhwSWFQylKT+y82b2rbF5wZCwkW+1Z9VF3HA6b0tupJfS+
  vAB492pjWJFIwjY2dh1B0vC0Qd2rTqfzD3QoOLdGeWsIEldV+JBmc1xnylQQv7Sc
  ls+bbjSD2mPndq4G068vWApWbl/KIEbbz+fzypjVWlIYxWhoWpw9j8iJFaPB1yNy
  oXGJ4K8iuHx3IwX5lfUdSzyjvkIJ4nsJkKjAutVGD6G+5H9b7IirimpiwtQPOQ8N
  NkAJ3Eu/PSEFufR7q/kq59x5ebK5gskbaSe3dgiTFhtTtBp+YKyUoaU=
  -----END CERTIFICATE-----

csrgen_ca_cert: "{{ csrgen_cert }}"

csrgen_private_key: |
  -----BEGIN PRIVATE KEY-----
  MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDDRxmlR+SxV7DE
  vwn+FFZJ7agK2dHh8rmfIDRYFkAvViblqn9hPHsV4DBGddLPZryKh+dbhpEKnCQ9
  PNxhe/hERYBig7jsjbyxaoQsBkbd20mvsXqo+HqDfdeL+YQWVYcJ5Yn4SQAbcVEQ
  8OEcubbU9yG/UwViB7vAhyOFfs+NG/LYAQLrD8B7UfW126x+6bdRiQiHF7307a7B
  bHCjZCQDNSL12cWOLMuWRwbkvSF3sJC6LHBEUOKnm3LBvlQFYmzH2ilT+Mdn3ion
  yU22HTIKFe4ee2vmdK90PUj9eWkaR798VYdXEGYcnwEKDvUpGXyVXGiqE15wdguI
  g6S640hTAgMBAAECggEAKjc8vBaGwjAK7v2900fiP6k5It9kGEy5BEWaC1EEHzeo
  wQ3S69p/YYNN7G2cXWoAaJJo2ciFop2O2A5INmruiRPdZW7Ek58wo8o7OKlCuMOn
  cmwT8GOHWNXju0b93zYuM12ELkDZ3RTqSZdJk0Qy2mdyzEHOcBrr4/tTGpEHnaGE
  ILVi2irL10uP0dP+n5l5uJXot5orkiRHrM7EIiqOs/shUAt2ztZ1iThwwowb0REr
  KY4eVwtFvVp7GlhYyDZu8FH9lY4Ak4NTi7hjnyi1rxmOMRULmWDhdoVxu24QC9ZP
  vj2DttD62oxPM2QXWo5jPZW2wkMC+KLVzmB/qwjrwQKBgQDzaiLkQ8ZDiyWOU+H5
  GypuRA1v/skyQOIPff/ufvMaZ19W9+tE2d6c8MKDI5OCXuKGX0wRMoU6HVVooYRX
  +c59EERe6n1sCjRyHOSPY5zC5n/rH9viuF3hU83DQp1a0Wxl3hKKCEN9+uErlnnC
  xmOgvYqG8WTXvSkePtGSy4Nb3wKBgQDNX9GfvuQxltoGlKTXUWMutQYyYTnRTIys
  Zdrtq+jazPMLiXtQ9fshf4mJxY5CM5ns9j7o4MN6IL9PR1ZnlMVjYWp2lKNJagYa
  pMT0P3y7nCfEpTtsAlqMXeO8pL86MZ0g3zb02HkJdZinDlZpe+cwxG7JJe4tvE1j
  gj7l7XwiDQKBgFa/cIfhD3tqz4uVoWbho5GAdzl+l71tGiNjSB5657B1PqkD2bjD
  3G4Z73hE6YEAx8ITnExUsN4xLgsH5N5ljI1NitA4yVIDoQU5/sqLOYbMFrJ4vChk
  hDCVaTM5PlLrZ7I2Hm1K3KK9Ehoymlor0b2rTv8gcEvighDhWlbyaHIJAoGALuIt
  54rbaxql4RSz4NeajcITjRK28TnJb129Mb6p5LEe1sZm2V+eGdKUolfwFtrSy86X
  I/CTj2DEa6O8bN8AhKRrenCKKitDA3gT4jJQFkAasACMZSbQZvTUFW+CnBVRanyq
  fhCg6PDojVJvlZsMdwyQweify98Nx6anFzQ0v00CgYAy/Qvuh6VIY+D7i+Yg6xC4
  YEC5sV8s+A8mknxw9ojhHrLMFzzybb4zoEJbItq852OFefv8Txd340cSNAnMj43K
  ylMHSloGaP37QjWcjSthfwKTGOgQnP6OBp860EQoK9te6BLbrHLSlaH1zO80f2hW
  g2ycIL5aC8lwelZ2+W4FXg==
  -----END PRIVATE KEY-----

# Prevent redirects to csrgenerator.com in QA
csrgen_vhost_https:
  - listen: 80 deferred default_server
    server_name: www.csrgenerator.com
    extra_parameters: |
      return 301 https://$server_name$request_uri;
  - listen: 443 ssl
    server_name: qa.csrgenerator.com
    keepalive_timeout: 5
    root: "{{ csrgen_home }}/src/static"
    extra_parameters: |
      ssl_certificate /etc/ssl/certs/csrgenerator.com.crt;
      ssl_certificate_key /etc/pki/tls/private/csrgenerator.com.key;
      ssl_session_timeout 1d;
      ssl_session_cache shared:SSL:50m;
      ssl_session_tickets off;
      ssl_dhparam /etc/ssl/dhparam2048.pem;
      ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
      ssl_ciphers 'ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA:ECDHE-ECDSA-DES-CBC3-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:DES-CBC3-SHA:!DSS';
      ssl_prefer_server_ciphers on;
      add_header Strict-Transport-Security max-age=15768000;
      ssl_stapling on;
      ssl_stapling_verify on;
      ssl_trusted_certificate /etc/ssl/certs/csrgenerator.com-ca.crt;
      gzip on;
      gzip_types text/html text/plain text/xml text/css application/x-javascript application/json;
      location / {
        try_files $uri @app;
      }
      location @app {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_pass http://csrgenerator;
      }
      location = /secretstatuspage {
        stub_status on;
        access_log off;
        allow 127.0.0.1;
        deny all;
      }
